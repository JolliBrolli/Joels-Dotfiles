# Converted to windowrulev2 (recommended) and updated for mail clients.
# See https://wiki.hypr.land/Configuring/Window-Rules/ for more
# See https://wiki.hypr.land/Configuring/Workspace-Rules/ for workspace rules

# Variables
$Opacity = opacity 0.9 0.9 # Changed to explicit active and inactive opacity

# Ignore maximize requests from apps.
windowrule = suppressevent maximize, class:.*

# Fix some dragging issues with XWayland
windowrulev2 = nofocus, class:^$, title:^$, xwayland:1, floating:1, fullscreen:0, pinned:0

# Apps placed on specific Workspaces
# Note: For static rules like 'workspace', the matching is done against the initialTitle/initialClass.

windowrulev2 = workspace 2, title:(.*Chromium.*)
windowrulev2 = workspace 2, title:(.*Firefox.*)
windowrulev2 = workspace 3, class:(code-editor)
windowrulev2 = workspace 5, title:(.*Spotify.*)
windowrulev2 = workspace 4, title:(.*Youtube.*)


# ------------------------------------------------------------------
# MERGED MAIL CLIENT RULE - Matches both Profile 1 and Profile 2 classes
# ------------------------------------------------------------------
# Classes matched: 
# 1. chrome-mail.google.com__-Profile_1
# 2. chrome-mail.google.com__-Profile_2

windowrulev2 = float, class:^((chrome-mail\.google\.com__-Profile_1)|(chrome-mail\.google\.com__-Profile_2))$
windowrulev2 = size 1200 900, class:^((chrome-mail\.google\.com__-Profile_1)|(chrome-mail\.google\.com__-Profile_2))$
windowrulev2 = center, class:^((chrome-mail\.google\.com__-Profile_1)|(chrome-mail\.google\.com__-Profile_2))$
windowrulev2 = $Opacity, class:^((chrome-mail\.google\.com__-Profile_1)|(chrome-mail\.google\.com__-Profile_2))$


# Custom floating class (dotfiles-floating)
windowrulev2 = float, class:(dotfiles-floating)
windowrulev2 = size 1000 700, class:(dotfiles-floating)
windowrulev2 = center, class:(dotfiles-floating)
windowrulev2 = $Opacity, class:(dotfiles-floating)

# Custom floating bluetooth manager
windowrulev2 = float, class:(blueman-manager)
windowrulev2 = size 1000 700, class:(blueman-manager)
windowrulev2 = center, class:(blueman-manager)
windowrulev2 = $Opacity, class:(blueman-manager)

# Custom volume control manager
windowrulev2 = float, class:(org.pulseaudio.pavucontrol)
windowrulev2 = size 1000 700, class:(org.pulseaudio.pavucontrol)
windowrulev2 = center, class:(org.pulseaudio.pavucontrol)
windowrulev2 = $Opacity, class:(org.pulseaudio.pavucontrol)

# Custom colour picker manager
windowrulev2 = float, class:(gcolor3)
windowrulev2 = size 1000 700, class:(gcolor3)
windowrulev2 = center, class:(gcolor3)
windowrulev2 = $Opacity, class:(gcolor3)

# Custom Thunar manager
windowrulev2 = float, class:(thunar)
windowrulev2 = size 1200 900, class:(thunar)
windowrulev2 = center, class:(thunar)
windowrulev2 = $Opacity, class:(thunar)

# Custom Gmail manager (The old one that was being duplicated/superseded. Keeping it for consistency)
windowrulev2 = float, class:(chrome-mail.google.com__-Gmail)
windowrulev2 = size 1200 900, class:(chrome-mail.google.com__-Gmail)
windowrulev2 = center, class:(chrome-mail.google.com__-Gmail)
windowrulev2 = $Opacity, class:(chrome-mail.google.com__-Gmail)

# Custom Ai manager
windowrulev2 = float, class:(chrome-gemini.google.com__app-Gemini)
windowrulev2 = size 1600 900, class:(chrome-gemini.google.com__app-Gemini)
windowrulev2 = center, class:(chrome-gemini.google.com__app-Gemini)
windowrulev2 = $Opacity, class:(chrome-gemini.google.com__app-Gemini)

# Custom Open Files manager (Now uses V2's comma-separated matching fields)
windowrulev2 = float, class:(xdg-desktop-portal-gtk), initialTitle:(Open Files)
windowrulev2 = size 1600 900, class:(xdg-desktop-portal-gtk), initialTitle:(Open Files)
windowrulev2 = center, class:(xdg-desktop-portal-gtk), initialTitle:(Open Files)
windowrulev2 = $Opacity, class:(xdg-desktop-portal-gtk), initialTitle:(Open Files)

# Custom rofi blur
layerrule = blur, rofi
